<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nosso Amor</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <!-- Libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Intro Overlay -->
  <div id="introOverlay" class="intro-overlay">
    <div class="intro-content">
      <h1>Para Daniela</h1>
      <button id="enterBtn" class="surprise-btn">
        <span class="material-icons">favorite</span> Entrar
      </button>
    </div>
  </div>

  <div class="bg_petals"></div>

  <div class="container">

    <!-- Title Section -->
    <div class="header-section fade-in">
      <h1 class="main-title">Antonio & Daniela</h1>
      <p class="subtitle">Eternizando nossos momentos</p>
    </div>

    <!-- Main Card with Carousel -->
    <div class="glass-card main-card fade-in">
      <div class="slick-carousel">
        <div><img class="carousel-image" alt="Foto" src="photo_2023-05-01_23-10-48.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-05-07_00-34-35.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-06-11_21-57-30.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-06-12_20-20-39.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-06-21_22-32-40.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-06-24_00-17-04.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-06-26_15-54-23.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-07-08_23-10-46.jpg"></div>
        <div><img class="carousel-image" alt="Foto" src="photo_2023-07-20_21-53-24.jpg"></div>
      </div>
      <div class="card-content">
        <p class="poetic-text">"No enlace de mãos, o amor floresce.<br>Cumplicidade em cada verso se tece.<br>Nossos corações, juntos, eternamente aquecem."</p>
      </div>
    </div>

    <!-- Timers Container -->
    <div class="timers-container fade-in">

      <!-- Relationship Timer -->
      <div class="glass-card timer-card">
        <h3>Juntos há</h3>
        <div id="relationship-timer" class="countdown-timer">
          <!-- JS will populate -->
        </div>
        <p class="since-date">Desde 28 de Julho de 2022</p>
      </div>

      <!-- Wedding Timer -->
      <div class="glass-card timer-card">
        <h3 id="wedding-title">Contagem regressiva</h3>
        <div id="wedding-timer" class="countdown-timer">
          <!-- JS will populate -->
        </div>
        <p id="wedding-date-display" class="since-date">29 de Novembro de 2025</p>
        <div id="bodas-display" class="bodas-badge" style="display:none;"></div>
      </div>

    </div>

    <!-- Reasons Why I Love You Section -->
    <div class="glass-card fade-in" style="max-width: 600px;">
      <h3>Por que eu te amo?</h3>
      <button id="reasonsBtn" class="surprise-btn reasons-btn">
        <span class="material-icons">volunteer_activism</span> Descubra um motivo
      </button>
      <div id="reason-display"></div>
    </div>

    <!-- Music & Surprise Section -->
    <div class="actions-section fade-in">
      <div class="glass-card music-card">
        <iframe id="musicPlayer" width="100%" height="80" src="https://www.youtube-nocookie.com/embed/cpGTmMLwWo8?controls=1&start=0"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen></iframe>
      </div>

      <button id="surpriseBtn" class="surprise-btn pulse">
        <span class="material-icons">favorite</span> Clique para uma Surpresa
      </button>
    </div>

    <!-- Final Message -->
    <div class="footer-section fade-in">
      <h2 class="love-message">Eu te amo infinitamente</h2>
    </div>

  </div>

  <!-- Envelope Overlay -->
  <div id="envelopeOverlay" class="envelope-overlay">
    <div class="envelope-wrapper" id="envelopeWrapper">
      <div class="envelope">
        <div class="envelope-back"></div>
        <div class="letter">
          <span class="close-envelope-btn">&times;</span>
          <h2>Minha Amada Daniela,</h2>
          <p>
            Cada dia ao seu lado é um presente. Preparei este cantinho para te lembrar o quanto você é especial para mim.<br><br>
            Obrigado por ser quem você é e por me fazer tão feliz.<br><br>
            Com todo meu amor,<br>Antonio.
          </p>
          <div style="color: #e91e63; font-size: 20px; margin-top: 10px;">❤️</div>
        </div>
        <div class="pocket-bottom"></div>
        <div class="pocket-left"></div>
        <div class="pocket-right"></div>
        <div class="envelope-flap"></div>
      </div>
      <div class="click-hint">Clique para abrir</div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    $(document).ready(function () {
      // Carousel
      $('.slick-carousel').slick({
        autoplay: true,
        autoplaySpeed: 3000,
        arrows: false,
        dots: true,
        infinite: true,
        fade: true,
        cssEase: 'linear',
        speed: 500
      });

      // --- TIMERS LOGIC ---
      const relationshipStart = new Date('2022-07-28T00:00:00').getTime();
      const weddingDate = new Date('2025-11-29T00:00:00').getTime();

      const bodasMap = {
        1: "Papel", 2: "Algodão", 3: "Trigo", 4: "Flores e Frutas", 5: "Madeira",
        6: "Perfume", 7: "Lã", 8: "Barro", 9: "Cerâmica", 10: "Estanho",
        15: "Cristal", 20: "Porcelana", 25: "Prata", 30: "Pérola",
        35: "Coral", 40: "Rubi", 45: "Platina", 50: "Ouro", 60: "Diamante"
      };

      function formatTime(ms) {
        const days = Math.floor(ms / (1000 * 60 * 60 * 24));
        const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((ms % (1000 * 60)) / 1000);
        return { days, hours, minutes, seconds };
      }

      function renderTimer(id, timeObj) {
        const html = `
          <div class="time-box"><span class="time-val">${timeObj.days}</span><span class="time-label">Dias</span></div>
          <div class="time-box"><span class="time-val">${timeObj.hours}</span><span class="time-label">Horas</span></div>
          <div class="time-box"><span class="time-val">${timeObj.minutes}</span><span class="time-label">Min</span></div>
          <div class="time-box"><span class="time-val">${timeObj.seconds}</span><span class="time-label">Seg</span></div>
        `;
        document.getElementById(id).innerHTML = html;
      }

      function updateTimers() {
        const now = new Date().getTime();

        // 1. Relationship Timer (Always count UP)
        const relDiff = now - relationshipStart;
        renderTimer('relationship-timer', formatTime(relDiff));

        // 2. Wedding Timer
        const weddingDiff = weddingDate - now;

        if (weddingDiff > 0) {
          // Future: Countdown
          document.getElementById('wedding-title').innerText = "Contagem regressiva";
          document.getElementById('wedding-date-display').style.display = 'block';
          document.getElementById('bodas-display').style.display = 'none';
          renderTimer('wedding-timer', formatTime(weddingDiff));
        } else {
          // Past: Married Timer + Bodas
          document.getElementById('wedding-title').innerText = "Casados há";
          const marriedDiff = now - weddingDate;
          const marriedTime = formatTime(marriedDiff);
          renderTimer('wedding-timer', marriedTime);

          // Calculate Bodas (Years)
          const yearsMarried = Math.floor(marriedDiff / (1000 * 60 * 60 * 24 * 365.25));
          if (yearsMarried >= 1) {
             const bodasName = bodasMap[yearsMarried] || "Amor";
             const bodasHtml = `<span class="material-icons">stars</span> Bodas de ${bodasName}`;
             const bodasEl = document.getElementById('bodas-display');
             bodasEl.innerHTML = bodasHtml;
             bodasEl.style.display = 'inline-block';
          } else {
             document.getElementById('bodas-display').style.display = 'none';
          }
        }
      }

      setInterval(updateTimers, 1000);
      updateTimers();

      // Reasons Logic
      const reasons = [
        "Pelo seu sorriso que ilumina meu dia.",
        "Pela forma como você cuida de mim.",
        "Por ser minha melhor amiga.",
        "Pelo seu abraço aconchegante.",
        "Pela nossa cumplicidade única.",
        "Porque você me inspira a ser melhor.",
        "Pelo brilho dos seus olhos.",
        "Por me apoiar em todos os momentos.",
        "Pelas nossas conversas infinitas.",
        "Porque ao seu lado, tudo fica perfeito.",
        "Pelo seu coração bondoso.",
        "Pela paz que você me traz.",
        "Porque você é o amor da minha vida.",
        "Pelo jeito que você me olha.",
        "Pela nossa história linda.",
        "Porque você me entende como ninguém.",
        "Pelo seu cheiro que eu amo.",
        "Porque você é meu porto seguro.",
        "Por todos os nossos planos futuros.",
        "Simplesmente por você existir."
      ];

      // Intro Overlay
      $('#enterBtn').click(function() {
        $('#introOverlay').fadeOut(1000, function() {
          $(this).remove();
        });
        // Try to trigger autoplay by updating src with autoplay=1
        const iframe = $('#musicPlayer');
        const src = iframe.attr('src');
        if (src.indexOf('autoplay') === -1) {
           iframe.attr('src', src + "&autoplay=1");
        }
      });

      $('#reasonsBtn').click(function() {
        // Disable button while typing
        const btn = $(this);
        if (btn.prop('disabled')) return;
        btn.prop('disabled', true);

        const randomReason = reasons[Math.floor(Math.random() * reasons.length)];
        const display = $('#reason-display');

        display.text(''); // Clear previous text
        display.css('opacity', 1);

        let i = 0;
        const text = '"' + randomReason + '"';

        function typeWriter() {
          if (i < text.length) {
            display.text(display.text() + text.charAt(i));
            i++;
            setTimeout(typeWriter, 50);
          } else {
             btn.prop('disabled', false);
          }
        }

        typeWriter();

        // Confetti burst
        confetti({
          particleCount: 40,
          spread: 60,
          origin: { y: 0.7 },
          colors: ['#ff6b81', '#e91e63', '#ffffff']
        });
      });

      // Background Petals Animation
      setInterval(function () {
        var r_size = Math.floor(Math.random() * 15) + 10;
        var r_left = Math.floor(Math.random() * 100) + 1;
        var r_time = Math.floor(Math.random() * 10) + 10;

        $('.bg_petals').append("<div class='petal' style='width:" + r_size + "px;height:" + r_size + "px;left:" + r_left + "%;animation-duration:" + r_time + "s'></div>");

        $('.petal').each(function () {
          var top = $(this).offset().top;
          if (top > window.innerHeight) {
            $(this).remove();
          }
        });
      }, 400);

      // Surprise Button
      $('#surpriseBtn').click(function() {
        var duration = 3 * 1000;
        var animationEnd = Date.now() + duration;
        var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

        function randomInOut(min, max) {
          return Math.random() * (max - min) + min;
        }

        var interval = setInterval(function() {
          var timeLeft = animationEnd - Date.now();
          if (timeLeft <= 0) return clearInterval(interval);
          var particleCount = 50 * (timeLeft / duration);
          confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInOut(0.1, 0.3), y: Math.random() - 0.2 } }));
          confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInOut(0.7, 0.9), y: Math.random() - 0.2 } }));
        }, 250);

        $('#envelopeOverlay').fadeIn().css('display', 'flex');
      });

      $('#envelopeWrapper').click(function() {
        $(this).addClass('open');
        $('.click-hint').hide();
      });

      $('.close-envelope-btn').click(function(e) {
        e.stopPropagation();
        $('#envelopeOverlay').fadeOut();
        setTimeout(function() {
          $('#envelopeWrapper').removeClass('open');
          $('.click-hint').show();
        }, 500);
      });
    });
  </script>
</body>
</html>